<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redice - 设置</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-deep: #0D1117; --bg-panel: #161B22; --bg-elevated: #21262D;
      --border: #30363D; --text-muted: #484F58; --text-secondary: #8B949E;
      --text-primary: #C9D1D9; --text-bright: #F0F6FC;
      --accent-red: #FF6B6B; --accent-teal: #4ECDC4; --accent-blue: #58A6FF;
      --accent-purple: #A78BFA; --accent-green: #3FB950; --accent-yellow: #D29922;
      --font-ui: 'IBM Plex Sans', sans-serif; --font-mono: 'JetBrains Mono', monospace;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: var(--font-ui); background: var(--bg-deep); color: var(--text-primary); height: 100vh; overflow: hidden; }
    .app { display: flex; flex-direction: column; height: 100vh; }

    /* Title Bar */
    .titlebar { display: flex; align-items: center; justify-content: space-between; height: 38px; background: var(--bg-panel); border-bottom: 1px solid var(--border); padding: 0 12px; }
    .titlebar-left, .titlebar-right { width: 80px; }
    .window-controls { display: flex; gap: 8px; }
    .control { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; }
    .control.close { background: #FF5F57; }
    .control.minimize { background: #FEBC2E; }
    .control.maximize { background: #28C840; }
    .logo { font-family: var(--font-mono); font-weight: 600; font-size: 13px; letter-spacing: 0.15em; color: var(--text-bright); }

    /* Main Layout */
    .main-layout { display: flex; flex: 1; overflow: hidden; position: relative; }

    /* Icon Sidebar */
    .icon-sidebar { width: 48px; background: var(--bg-panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; align-items: center; padding: 12px 0; }
    .icon-sidebar-top, .icon-sidebar-bottom { display: flex; flex-direction: column; gap: 4px; }
    .icon-sidebar-bottom { margin-top: auto; }
    .sidebar-icon { width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; border-radius: 8px; color: var(--text-muted); cursor: pointer; transition: all 0.15s; }
    .sidebar-icon:hover { background: var(--bg-elevated); color: var(--text-primary); }
    .sidebar-icon.active { background: var(--bg-elevated); color: var(--accent-red); }
    .sidebar-icon svg { width: 20px; height: 20px; }

    /* Main Content placeholder */
    .main-content { flex: 1; display: flex; align-items: center; justify-content: center; background: var(--bg-deep); color: var(--text-muted); }

    /* Modal Overlay */
    .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 1000; backdrop-filter: blur(4px); }
    .modal-overlay.hidden { display: none; }

    /* Settings Modal */
    .settings-modal { width: 700px; max-width: 90vw; height: 500px; max-height: 80vh; background: var(--bg-panel); border: 1px solid var(--border); border-radius: 12px; display: flex; overflow: hidden; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); }

    /* Settings Nav */
    .settings-nav { width: 180px; background: var(--bg-deep); border-right: 1px solid var(--border); padding: 16px 0; overflow-y: auto; flex-shrink: 0; }
    .settings-nav-title { padding: 8px 16px; font-size: 11px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; }
    .settings-nav-item { display: flex; align-items: center; gap: 10px; padding: 10px 16px; color: var(--text-secondary); cursor: pointer; transition: all 0.15s; border-left: 2px solid transparent; font-size: 13px; }
    .settings-nav-item:hover { background: var(--bg-elevated); color: var(--text-primary); }
    .settings-nav-item.active { background: var(--bg-elevated); color: var(--accent-red); border-left-color: var(--accent-red); }
    .settings-nav-item svg { width: 16px; height: 16px; flex-shrink: 0; }

    /* Settings Content */
    .settings-content { flex: 1; overflow-y: auto; padding: 20px 24px; position: relative; }
    .settings-close { position: absolute; top: 16px; right: 16px; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; border-radius: 6px; color: var(--text-muted); cursor: pointer; transition: all 0.15s; background: none; border: none; }
    .settings-close:hover { background: var(--bg-elevated); color: var(--text-primary); }
    .settings-section { display: none; }
    .settings-section.active { display: block; }
    .settings-section-title { font-size: 15px; font-weight: 600; color: var(--text-bright); margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--border); }
    .settings-section-desc { font-size: 12px; color: var(--text-muted); margin-bottom: 16px; }

    /* Setting Item */
    .setting-item { display: flex; align-items: center; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border); }
    .setting-item:last-child { border-bottom: none; }
    .setting-info { flex: 1; }
    .setting-label { font-size: 13px; color: var(--text-primary); margin-bottom: 2px; }
    .setting-desc { font-size: 11px; color: var(--text-muted); }
    .setting-control { flex-shrink: 0; margin-left: 16px; }

    /* Select */
    .select-wrapper { position: relative; }
    .select-wrapper select { appearance: none; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 6px; padding: 6px 28px 6px 10px; font-size: 12px; color: var(--text-primary); cursor: pointer; min-width: 120px; font-family: var(--font-ui); }
    .select-wrapper select:hover { border-color: var(--text-muted); }
    .select-wrapper select:focus { outline: none; border-color: var(--accent-blue); }
    .select-wrapper::after { content: '▾'; position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: var(--text-muted); pointer-events: none; font-size: 9px; }

    /* Input */
    .input-field { background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 6px; padding: 6px 10px; font-size: 12px; color: var(--text-primary); width: 80px; font-family: var(--font-mono); text-align: center; }
    .input-field:hover { border-color: var(--text-muted); }
    .input-field:focus { outline: none; border-color: var(--accent-blue); }

    /* Toggle Switch */
    .toggle { position: relative; width: 40px; height: 22px; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 11px; cursor: pointer; transition: all 0.2s; }
    .toggle.active { background: var(--accent-green); border-color: var(--accent-green); }
    .toggle::after { content: ''; position: absolute; top: 3px; left: 3px; width: 14px; height: 14px; background: var(--text-muted); border-radius: 50%; transition: all 0.2s; }
    .toggle.active::after { left: 21px; background: white; }

    /* Button */
    .btn { display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500; cursor: pointer; transition: all 0.15s; border: none; font-family: var(--font-ui); }
    .btn-secondary { background: var(--bg-elevated); color: var(--text-primary); border: 1px solid var(--border); }
    .btn-secondary:hover { background: var(--border); }
    .btn-danger { background: transparent; color: var(--accent-red); border: 1px solid var(--accent-red); }
    .btn-danger:hover { background: rgba(255, 107, 107, 0.1); }

    /* Path Display */
    .path-display { display: flex; align-items: center; gap: 6px; }
    .path-text { font-family: var(--font-mono); font-size: 11px; color: var(--text-secondary); background: var(--bg-elevated); padding: 6px 10px; border-radius: 6px; border: 1px solid var(--border); max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .path-btn { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 6px; color: var(--text-muted); cursor: pointer; transition: all 0.15s; }
    .path-btn:hover { background: var(--border); color: var(--text-primary); }

    /* Button Group */
    .btn-group { display: flex; gap: 6px; }

    /* About Info */
    .about-info { padding: 12px; background: var(--bg-deep); border-radius: 8px; border: 1px solid var(--border); }
    .about-info-item { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid var(--border); }
    .about-info-item:last-child { border-bottom: none; }
    .about-info-label { font-size: 12px; color: var(--text-secondary); }
    .about-info-value { font-size: 12px; color: var(--text-primary); font-family: var(--font-mono); }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  </style>
</head>
<body>
  <div class="app">
    <!-- Title Bar -->
    <div class="titlebar">
      <div class="titlebar-left">
        <div class="window-controls">
          <span class="control close"></span>
          <span class="control minimize"></span>
          <span class="control maximize"></span>
        </div>
      </div>
      <div class="titlebar-center"><span class="logo">REDICE</span></div>
      <div class="titlebar-right"></div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
      <!-- Icon Sidebar -->
      <div class="icon-sidebar">
        <div class="icon-sidebar-top">
          <div class="sidebar-icon active" title="连接">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8M12 17v4"/>
            </svg>
          </div>
          <div class="sidebar-icon" title="历史">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/>
            </svg>
          </div>
        </div>
        <div class="icon-sidebar-bottom">
          <div class="sidebar-icon" id="open-settings" title="设置">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"/>
              <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
            </svg>
          </div>
          <div class="sidebar-icon" title="GitHub">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
            </svg>
          </div>
        </div>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        点击左下角设置图标打开设置弹窗
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal-overlay" id="settings-modal">
    <div class="settings-modal">
      <!-- Settings Nav -->
      <div class="settings-nav">
        <div class="settings-nav-title">设置</div>
        <div class="settings-nav-item active" data-target="appearance">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
          </svg>
          <span>外观</span>
        </div>
        <div class="settings-nav-item" data-target="editor">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/>
          </svg>
          <span>编辑器</span>
        </div>
        <div class="settings-nav-item" data-target="history">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/>
          </svg>
          <span>历史记录</span>
        </div>
        <div class="settings-nav-item" data-target="data">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/>
          </svg>
          <span>数据管理</span>
        </div>
        <div class="settings-nav-item" data-target="about">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          <span>关于</span>
        </div>
      </div>

      <!-- Settings Content -->
      <div class="settings-content">
        <button class="settings-close" id="close-settings" title="关闭">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>

        <!-- 外观设置 -->
        <div class="settings-section active" id="appearance">
          <h2 class="settings-section-title">外观</h2>
          <p class="settings-section-desc">自定义应用程序的外观和显示方式</p>
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">主题</div>
              <div class="setting-desc">选择应用程序的颜色主题</div>
            </div>
            <div class="setting-control">
              <div class="select-wrapper">
                <select>
                  <option value="dark">深色</option>
                  <option value="light">浅色</option>
                  <option value="system">跟随系统</option>
                </select>
              </div>
            </div>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">语言</div>
              <div class="setting-desc">选择界面显示语言</div>
            </div>
            <div class="setting-control">
              <div class="select-wrapper">
                <select>
                  <option value="zh-CN">简体中文</option>
                  <option value="en">English</option>
                </select>
              </div>
            </div>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">字体大小</div>
              <div class="setting-desc">调整界面文字大小</div>
            </div>
            <div class="setting-control">
              <div class="select-wrapper">
                <select>
                  <option value="12">12px</option>
                  <option value="13" selected>13px</option>
                  <option value="14">14px</option>
                  <option value="15">15px</option>
                  <option value="16">16px</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- 编辑器设置 -->
        <div class="settings-section" id="editor">
          <h2 class="settings-section-title">编辑器</h2>
          <p class="settings-section-desc">配置键值编辑器的显示和行为</p>
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">JSON 自动格式化</div>
              <div class="setting-desc">自动格式化 JSON 数据以便阅读</div>
            </div>
            <div class="setting-control">
              <div class="toggle active" onclick="this.classList.toggle('active')"></div>
            </div>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">默认编码</div>
              <div class="setting-desc">显示和编辑数据时使用的字符编码</div>
            </div>
            <div class="setting-control">
              <div class="select-wrapper">
                <select>
                  <option value="utf-8">UTF-8</option>
                  <option value="gbk">GBK</option>
                  <option value="gb2312">GB2312</option>
                  <option value="iso-8859-1">ISO-8859-1</option>
                </select>
              </div>
            </div>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">显示行号</div>
              <div class="setting-desc">在编辑器中显示行号</div>
            </div>
            <div class="setting-control">
              <div class="toggle active" onclick="this.classList.toggle('active')"></div>
            </div>
          </div>
        </div>

        <!-- 历史记录设置 -->
        <div class="settings-section" id="history">
          <h2 class="settings-section-title">历史记录</h2>
          <p class="settings-section-desc">管理命令执行历史记录</p>
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">保留天数</div>
              <div class="setting-desc">历史记录保留的天数，超过后自动清理</div>
            </div>
            <div class="setting-control">
              <input type="number" class="input-field" value="30" min="1" max="365">
            </div>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">最大记录数</div>
              <div class="setting-desc">保留的最大历史记录条数</div>
            </div>
            <div class="setting-control">
              <input type="number" class="input-field" value="1000" min="100" max="10000">
            </div>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">清除历史</div>
              <div class="setting-desc">删除所有历史记录，此操作不可恢复</div>
            </div>
            <div class="setting-control">
              <button class="btn btn-danger">清除全部</button>
            </div>
          </div>
        </div>

        <!-- 数据管理 -->
        <div class="settings-section" id="data">
          <h2 class="settings-section-title">数据管理</h2>
          <p class="settings-section-desc">管理应用程序数据和配置</p>
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">数据存储位置</div>
              <div class="setting-desc">应用程序数据和配置文件的存储路径</div>
            </div>
            <div class="setting-control">
              <div class="path-display">
                <span class="path-text">~/.config/redice</span>
                <button class="path-btn" title="打开文件夹">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">导入 / 导出配置</div>
              <div class="setting-desc">备份或恢复连接配置和应用设置</div>
            </div>
            <div class="setting-control">
              <div class="btn-group">
                <button class="btn btn-secondary">导入</button>
                <button class="btn btn-secondary">导出</button>
              </div>
            </div>
          </div>
        </div>

        <!-- 关于 -->
        <div class="settings-section" id="about">
          <h2 class="settings-section-title">关于</h2>
          <p class="settings-section-desc">应用程序版本和构建信息</p>
          <div class="about-info">
            <div class="about-info-item">
              <span class="about-info-label">版本</span>
              <span class="about-info-value">0.1.0</span>
            </div>
            <div class="about-info-item">
              <span class="about-info-label">构建日期</span>
              <span class="about-info-value">2025-01-27</span>
            </div>
            <div class="about-info-item">
              <span class="about-info-label">Rust 版本</span>
              <span class="about-info-value">1.84.0</span>
            </div>
            <div class="about-info-item">
              <span class="about-info-label">GPUI 版本</span>
              <span class="about-info-value">0.5.0</span>
            </div>
            <div class="about-info-item">
              <span class="about-info-label">许可证</span>
              <span class="about-info-value">MIT</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const modal = document.getElementById('settings-modal');
    const openBtn = document.getElementById('open-settings');
    const closeBtn = document.getElementById('close-settings');

    // 打开弹窗
    openBtn.addEventListener('click', () => {
      modal.classList.remove('hidden');
    });

    // 关闭弹窗
    closeBtn.addEventListener('click', () => {
      modal.classList.add('hidden');
    });

    // 点击遮罩关闭
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.classList.add('hidden');
      }
    });

    // ESC 关闭
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
        modal.classList.add('hidden');
      }
    });

    // 导航切换
    document.querySelectorAll('.settings-nav-item').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.settings-nav-item').forEach(i => i.classList.remove('active'));
        document.querySelectorAll('.settings-section').forEach(s => s.classList.remove('active'));
        item.classList.add('active');
        const target = item.dataset.target;
        document.getElementById(target).classList.add('active');
      });
    });
  </script>
</body>
</html>
